import"../chunks/NZTpNUN0.js";import{aI as Qe,j as a,ad as Re,e as Ge,u as Ve,aJ as Xe,aK as Ye,p as Ze,f as S,as as $e,s as z,a as oe,t as T,b as y,c as et,at as tt,d as A,aA as g,aL as at,r as b,aw as Z,l as ge}from"../chunks/Bu6Hv_od.js";import{i as st,d as rt,e as nt,s as Q}from"../chunks/CK9BjX-b.js";import{i as q}from"../chunks/CUO8nWVF.js";import{e as $,i as ot}from"../chunks/DZpgHMJ9.js";import{a as he,e as it}from"../chunks/CXOmw8Qz.js";import{r as lt,a as ye,s as _e}from"../chunks/DO1Xw95D.js";import{s as R}from"../chunks/DZKXfPlE.js";import{c as ct}from"../chunks/X5Sv9yWS.js";import{p as dt}from"../chunks/DJoK9kIY.js";function vt(r){let e=0,c=Re(0),d;return()=>{Qe()&&(a(c),Ge(()=>(e===0&&(d=Ve(()=>r(()=>Xe(c)))),e+=1,()=>{Ye().then(()=>{e-=1,e===0&&(d?.(),d=void 0)})})))}}var be="mz3PUW_p",xe=["#FFC700","#FF0000","#2E3191","#41BBC7"],we=3500,ke=.5,je=150,ze="mix",Pe=12,Se="",We=!0,Ue=800,Ae=1600;function ut(r,e={}){let{colors:c=xe,duration:d=we,force:m=ke,particleCount:w=je,particleShape:W=ze,particleSize:k=Pe,particleClass:M=Se,destroyAfterDone:J=We,stageHeight:V=Ue,stageWidth:K=Ae}=e;(function(o){if(document.querySelector("style[data-neoconfetti]"))return;const v=ie("style");v.dataset.neoconfetti="",v.textContent=o,le(document.head,v)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),r.classList.add("mz3PUW_c"),r.style.setProperty("--sh",V+"px");let C=[],U=[];const L=()=>G(P()*(ht-1)),B=(o,v)=>W!=="rectangles"&&(o==="circles"||yt(v));function X(o,v){const j=L(),s=B(W,j),t=(u,p)=>o.style.setProperty(u,p+"");t("--xlp",ce(ee(Le(v,90)-180),0,180,-K/2,K/2)+"px"),t("--dc",d-G(1e3*P())+"ms");const n=P()<mt?D(P()*pt,2):0;t("--x1",n),t("--x2",-1*n),t("--x3",n),t("--x4",D(ee(ce(ee(Le(v,90)-180),0,180,-1,1)),4)),t("--y1",D(P()*Ce,4)),t("--y2",D(P()*m*(Ne()?1:-1),4)),t("--y3",Ce),t("--y4",D(gt(ce(ee(v-180),0,180,m,-m),0),4)),t("--w",(s?k:G(4*P())+k/2)+"px"),t("--h",(s?k:G(2*P())+k)+"px");const i=j.toString(2).padStart(3,"0").split("");t("--hr",i.map(u=>+u/2+"").join(" ")),t("--r",i.join(" ")),t("--rd",D(P()*(ft-Me)+Me)+"ms"),t("--br",s?"50%":0)}let N;function Y(){r.innerHTML="",clearTimeout(N),C=He(w,c),U=function(o,v=[],j){const s=[];for(const{color:t}of v){const n=ie("div");n.className=`${be} ${j}`,n.style.setProperty("--bgc",t);const i=ie("div");le(n,i),le(o,n),s.push(n)}return s}(r,C,M);for(const[o,v]of Ee(U))X(v,C[+o].degree);N=setTimeout(()=>{J&&(r.innerHTML="")},d)}return Y(),{update(o){const v=o.particleCount??je,j=o.particleShape??ze,s=o.particleSize??Pe,t=o.particleClass??Se,n=o.colors??xe,i=o.stageHeight??Ue,u=o.duration??we,p=o.force??ke,l=o.stageWidth??Ae,x=o.destroyAfterDone??We;C=He(v,n);let h=!1;if(v===w){U=Array.from(r.querySelectorAll(`.${be}`));for(const[E,{color:_}]of Ee(C)){const f=U[+E];JSON.stringify(c)!==JSON.stringify(n)&&f.style.setProperty("--bgc",_),j!==W&&f.style.setProperty("--br",B(j,L())?"50%":"0"),t!==M&&(M&&f.classList.remove(M),t&&f.classList.add(t))}}else h=!0;J&&!x&&clearTimeout(N),r.style.setProperty("--sh",i+"px"),d=u,c=n,m=p,w=v,W=j,k=s,M=t,J=x,V=i,K=l,h&&Y()},destroy(){r.innerHTML="",clearTimeout(N)}}}var Me=200,ft=800,mt=.1,pt=.3,Ce=.5,ee=Math.abs,P=Math.random,G=Math.round,gt=Math.max,ie=r=>document.createElement(r),le=(r,e)=>r.appendChild(e),He=(r,e)=>Array.from({length:r},(c,d)=>({color:e[d%e.length],degree:360*d/r})),D=(r,e=2)=>G((r+Number.EPSILON)*10**e)/10**e,ce=(r,e,c,d,m)=>(r-e)*(m-d)/(c-e)+d,Le=(r,e)=>r+e>360?r+e-360:r+e,Ne=()=>P()>.5,Ee=Object.entries,ht=6,yt=r=>r!==1&&Ne();class _t{#e;#t;constructor(e,c){this.#e=e,this.#t=vt(c)}get current(){return this.#t(),this.#e()}}const bt=/\(.+\)/,xt=new Set(["all","print","screen","and","or","not","only"]);class wt extends _t{constructor(e,c){let d=bt.test(e)||e.split(/[\s,]+/).some(w=>xt.has(w.trim()))?e:`(${e})`;const m=window.matchMedia(d);super(()=>m.matches,w=>st(m,"change",w))}}function Te(r,e,c){r.preventDefault();const d=r.target.getAttribute("data-key");d==="backspace"?(ge(e,a(e).slice(0,-1)),c()?.badGuess&&c(c().badGuess=!1,!0)):a(e).length<5&&ge(e,a(e)+d)}var kt=S('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),jt=S('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),zt=S('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Pt=S('<p class="svelte-1pg2j5l"> </p>'),St=S('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Wt=S('<button formaction="?/update" name="key"> </button>'),Ut=S('<div class="row svelte-1pg2j5l"></div>'),At=S('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Mt=S('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Ct=S('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Kt(r,e){Ze(e,!0);let c=dt(e,"form",15);const d=new wt("(prefers-reduced-motion: reduce)");let m=g(()=>e.data.answers.at(-1)==="xxxxx"),w=g(()=>a(m)?-1:e.data.answers.length),W=g(()=>e.data.guesses[a(w)]||""),k=g(()=>a(W).length===5);const M=g(()=>{let s={},t={};return e.data.answers.forEach((n,i)=>{const u=e.data.guesses[i];for(let p=0;p<5;p+=1){const l=u[p];n[p]==="x"?(s[l]="exact",t[l]="correct"):s[l]||(s[l]=n[p]==="c"?"close":"missing",t[l]=n[p]==="c"?"present":"absent")}}),{classnames:s,description:t}}),J=g(()=>a(M).classnames),V=g(()=>a(M).description);function K(s){s.metaKey||s.key==="Enter"&&!a(k)||document.querySelector(`[data-key="${s.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var C=Ct();nt("keydown",at,K),$e(s=>{var t=kt();tt.title="Sverdle",y(s,t)});var U=z(oe(C),2),L=z(A(U),2);let B;$(L,20,()=>Array.from(Array(6).keys()),s=>s,(s,t)=>{var n=zt();const i=g(()=>t===a(w));var u=oe(n),p=A(u);b(u);var l=z(u,2);let x;$(l,20,()=>Array.from(Array(5).keys()),h=>h,(h,E)=>{var _=jt();const f=g(()=>a(i)?a(W):e.data.guesses[t]),I=g(()=>e.data.answers[t]?.[E]),de=g(()=>a(f)?.[E]??""),Fe=g(()=>a(i)&&E===a(f).length),ve=g(()=>a(I)==="x"),ue=g(()=>a(I)==="c"),fe=g(()=>a(I)==="_");let me;var pe=A(_),te=z(pe),Oe=A(te);{var qe=H=>{var se=Z("(correct)");y(H,se)},De=(H,se)=>{{var Je=F=>{var re=Z("(present)");y(F,re)},Ke=(F,re)=>{{var Be=O=>{var ne=Z("(absent)");y(O,ne)},Ie=O=>{var ne=Z("empty");y(O,ne)};q(F,O=>{a(fe)?O(Be):O(Ie,!1)},re)}};q(H,F=>{a(ue)?F(Je):F(Ke,!1)},se)}};q(Oe,H=>{a(ve)?H(qe):H(De,!1)})}b(te);var ae=z(te,2);lt(ae),b(_),T(H=>{me=R(_,1,"letter svelte-1pg2j5l",null,me,H),Q(pe,`${a(de)??""} `),ae.disabled=!a(i),ye(ae,a(de))},[()=>({exact:a(ve),close:a(ue),missing:a(fe),selected:a(Fe)})]),y(h,_)}),b(l),T(h=>{Q(p,`Row ${t+1}`),x=R(l,1,"row svelte-1pg2j5l",null,x,h)},[()=>({current:a(i)})]),y(s,n)}),b(L);var X=z(L,2),N=A(X);{var Y=s=>{var t=St(),n=oe(t);{var i=l=>{var x=Pt(),h=A(x);b(x),T(()=>Q(h,`the answer was "${e.data.answer??""}"`)),y(l,x)};q(n,l=>{!a(m)&&e.data.answer&&l(i)})}var u=z(n,2),p=A(u);b(u),T(()=>Q(p,`${a(m)?"you won :)":"game over :("} play again?`)),y(s,t)},o=s=>{var t=At(),n=A(t);let i;var u=z(n,2);u.__click=[Te,W,c];var p=z(u,2);$(p,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],l=>l,(l,x)=>{var h=Ut();$(h,21,()=>x,ot,(E,_)=>{var f=Wt();f.__click=[Te,W,c];var I=A(f,!0);b(f),T(()=>{_e(f,"data-key",a(_)),R(f,1,ct(a(J)[a(_)]),"svelte-1pg2j5l"),f.disabled=a(k),ye(f,a(_)),_e(f,"aria-label",`${a(_)??""} ${(a(V)[a(_)]||"")??""}`),Q(I,a(_))}),y(E,f)}),b(h),y(l,h)}),b(t),T(l=>{n.disabled=!a(k),i=R(n,1,"svelte-1pg2j5l",null,i,l)},[()=>({selected:a(k)})]),y(s,t)};q(N,s=>{a(m)||e.data.answers.length>=6?s(Y):s(o,!1)})}b(X),b(U),he(U,(s,t)=>it?.(s,t),()=>()=>({update:s})=>{s({reset:!1})});var v=z(U,2);{var j=s=>{var t=Mt();he(t,(n,i)=>ut?.(n,i),()=>({particleCount:d.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),y(s,t)};q(v,s=>{a(m)&&s(j)})}T(s=>B=R(L,1,"grid svelte-1pg2j5l",null,B,s),[()=>({playing:!a(m),"bad-guess":c()?.badGuess})]),y(r,C),et()}rt(["click"]);export{Kt as component};
